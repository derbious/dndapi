<!DOCTYPE html>
<html lang="en" ng-app="dnd">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans|Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>
    <script src="js/dndonations.js"></script>
    <title>DnDonations Management Console</title>
</head>

<body>

    <div class="grid-container">
        <div class="box hd"><h1>DnDonations Management Console</h1></div>
        <div class="box li">
            <a href="#lm">Login</a>
        </div>

        <!-- Donor Administration -->
        <div class="box dn" ng-controller="ViewDonorController">
            <div id="lookup">
                <h3>Donor Lookup</h3>
                <input type="text" ng-model="query" ng-focus="refreshDonors()"/>
                <table ng-show="query.length >= 3">
                    <tr ng-repeat="d in donors | filter:query | limitTo: 5" ng-click="showDonor(d.id)">
                        <td>{{ d.first_name }}</td>
                        <td>{{ d.last_name }}</td>
                        <td>{{ d.email_address }}</td>
                        <td><button>me</button></td>
                    </tr>
                </table>
            </div>

            <!-- View Donor -->
            <div id="results">
                <h3>Donor Information</h3>
                <div>First name: {{current_donor.first_name}}</div>
                <div>Last name: {{current_donor.last_name}}</div>
                <div>Email: {{current_donor.email_address}}</div>
                <div>Physical Address: {{current_donor.physical_address}}</div>
                <div>DCI: {{current_donor.dci_number}}</div>
                <div>Total Donations: {{current_donor.total_donations}}</div>
                <div>Availabe Gold: {{current_donor.available_gold}}</div>
                <button ng-click="panel='addgold'">Add Gold</button>
                <button ng-click="panel='addchar'">Add Character</button><br>
                <button ng-click="panel='addboon'" ng-disabled="current_donor.available_gold < 5.0">Purchase Boon</button>
                <button ng-click="panel='addbane'">Purchase Bane</button>

                <!-- This div's content is swapped out -->
                <div ng-switch on="panel">
                    <!-- add Gold panel-->
                    <div ng-switch-when="addgold">
                        <form ng-submit="addDonation()">
                            <label>Amount: <input type="text" ng-model="nd.amount"/></label><br/>
                            <label>Method: 
                                <select ng-model="nd.method">
                                    <option value="cash" default>Cash</option>
                                    <option value="online">Online</option>
                                </select></label><br/>
                            <input type="submit" value="Submit" />
                        </form>
                    </div>
                    <!-- add char -->
                    <div ng-switch-when="addchar">
                        <h4>add char</h4>
                        <form novalidate ng-submit="createCharacter()">
                          <label>Character Name: <input type="text" ng-model="character.name"/></label><br/>
                          <label>Race:<select ng-model="character.race">
                              <option selected>Dragonborn</option>
                              <option>Drow</option>
                              <option>Dwarf</option>
                              <option>Elf</option>
                              <option>Gnome</option>
                              <option>Half-Elf</option>
                              <option>Half-Orc</option>
                              <option>Halfling</option>
                              <option>Human</option>
                              <option>Tiefling</option>
                          </select></label>
                          <label>Character Class<select ng-model="character.char_class">
                              <option selected>Barbarian</option>
                              <option>Bard</option>
                              <option>Cleric</option>
                              <option>Druid</option>
                              <option>Fighter</option>
                              <option>Monk</option>
                              <option>Paladin</option>
                              <option>Ranger</option>
                              <option>Rogue</option>
                              <option>Sorcerer</option>
                              <option>Warlock</option>
                              <option>Wizard</option>
                          </select>
                          <input type="submit" value="Create"/>
                        </form>
                    </div>
                    <!-- add boon -->
                    <div ng-switch-when="addboon">
                        <h4>purchase boon</h4>
                        <form novalidate ng-submit="addPurchase('boon')">
                            <label>Do it? <input type="submit" value="yes"/></label>
                        </form>
                    </div>
                    <!-- add bane -->
                    <div ng-switch-when="addbane">
                        <h4>purchase bane</h4>
                        <form novalidate ng-submit="addPurchase('bane')">
                            <label>Do it? <input type="submit" value="yes"/></label>
                        </form>
                    </div>

                </div>
            </div>
            <div>{{error_msg}}</div>
        </div>
        
        <!-- Player Queue -->
        <div class="box qu"><h3>Player Queue</h3>
            <div class="playqu">WIDGET GOES HERE</div>
        </div>

        <!-- Donor Add -->
        <div class="box da" ng-controller="NewDonorController">
            <h3>Add Donor</h3>
            <form novalidate ng-submit="addDonor(donor)">
                <label>First Name: <input type="text" ng-model="donor.first_name"/></label><br />
                <label>Last Name: <input type="text" ng-model="donor.last_name"/></label><br/>
                <label>Physical Address: <input type="text" ng-model="donor.physical_address"/></label><br/>
                <label>Email: <input type="text" ng-model="donor.email_address"/></label><br/>
                <label>DCI Number: <input type="text" ng-model="donor.dci_number"/></label><br/>
                <input type="submit" value="Submit" />
            </form>
        </div>
    </div>

    <!-- login modal -->
    <div id="lm" class="logmodal" ng-controller="LoginController">
        <div>
            <a href="#" title="Close" class="close">X</a>
            <h2>Please Log In</h2>
            <fieldset>
                <form novalidate ng-submit="doLogin(user)">
                    <label>Username: <input type="text" ng-model="user.username"/></label><br/>
                    <label>Password: <input type="password" ng-model="user.password"/></label><br/>
                    <input type="submit" value="Login" />
                </form>
                <!-- <div>{{ user | json }}</div>
                <div>{{ apitoken }}</div> -->
            </fieldset>
        </div>
    </div>

</body>
</html>

<!--
    <div class="container" ng-controller="NewCharacterController" ng-show="display">
        <h2>New Character</h2>

        <form novalidate>
          <label>Character: <input type="text" ng-model="character.name"/></label><br/>
          <label>Race: <input type="password" ng-model="user.password"/></label><br/>
          <label>Class: <input type="password" ng-model="user.password"/></label><br/>
          <label>Account paying registration: <input type="password" ng-model="user.password"/></label><br/>
          <input type="submit" ng-click="doLogin(user)" value="Login" />
      </form>
      <div>{{ user | json }}</div>
      <div>{{ apitoken }}</div>
    </div> -->
